{% extends "base.html" %}

{% block title %}Edit Product - Mabutsi(IMS){% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="fas fa-edit"></i> Edit Product</h1>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
    </a>
</div>

<div class="form-container">
    <form method="POST" class="product-form">
        <div class="form-row">
            <div class="form-group">
                <label for="name">
                    <i class="fas fa-tag"></i> Product Name *
                </label>
                <input type="text" id="name" name="name" value="{{ product[1] }}" required autofocus>
            </div>

            <div class="form-group">
                <label for="category">
                    <i class="fas fa-layer-group"></i> Category
                </label>
                <input type="text" id="category" name="category" value="{{ product[6] if product[6] else '' }}" list="categories">
                <datalist id="categories">
                    <option value="Electronics">
                    <option value="Clothing">
                    <option value="Food & Beverage">
                    <option value="Home & Garden">
                    <option value="Sports">
                    <option value="Books">
                </datalist>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="cost">
                    <i class="fas fa-dollar-sign"></i> Cost Price (R) *
                </label>
                <input type="number" id="cost" name="cost" step="0.01" min="0" value="{{ product[2] }}" required>
            </div>

            <div class="form-group">
                <label for="price">
                    <i class="fas fa-money-bill-wave"></i> Selling Price (R) *
                </label>
                <input type="number" id="price" name="price" step="0.01" min="0" value="{{ product[3] }}" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="stock">
                    <i class="fas fa-boxes"></i> Stock Quantity *
                </label>
                <input type="number" id="stock" name="stock" min="0" value="{{ product[4] }}" required>
            </div>

            <div class="form-group">
                <label for="min_stock">
                    <i class="fas fa-exclamation-triangle"></i> Minimum Stock Level *
                </label>
                <input type="number" id="min_stock" name="min_stock" min="0" value="{{ product[5] if product[5] else 5 }}" required>
                <small class="form-text">Alert when stock falls below this</small>
            </div>
        </div>

        <div class="form-group">
            <label for="supplier_id">
                <i class="fas fa-truck"></i> Supplier
            </label>
            <select id="supplier_id" name="supplier_id">
                <option value="">-- No Supplier --</option>
                {% for supplier in suppliers %}
                <option value="{{ supplier[0] }}" {% if product[8] == supplier[0] %}selected{% endif %}>
                    {{ supplier[1] }}
                </option>
                {% endfor %}
            </select>
        </div>

        {% if product[7] %}
        <div class="form-group">
            <label>
                <i class="fas fa-barcode"></i> Barcode
            </label>
            <input type="text" value="{{ product[7] }}" disabled>
            <small class="form-text">Barcode cannot be changed</small>
        </div>
        {% endif %}

        <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-lg">
                <i class="fas fa-save"></i> Update Product
            </button>
            <a href="{{ url_for('index') }}" class="btn btn-secondary btn-lg">
                <i class="fas fa-times"></i> Cancel
            </a>
        </div>
    </form>
</div>

{% endblock %}